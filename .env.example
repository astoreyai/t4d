# World Weaver Environment Configuration
# Copy to .env and set secure values before starting
#
# REQUIRED: Set these before running docker-compose
# OPTIONAL: Uncomment and set for production
#
# Quick setup: Run ./scripts/setup-env.sh to auto-generate secure passwords

# ============================================
# Docker Services (REQUIRED)
# ============================================
NEO4J_USER=neo4j
NEO4J_PASSWORD=  # REQUIRED: Min 8 chars, no common passwords (run setup-env.sh)

# ============================================
# Qdrant Configuration (Optional for dev)
# ============================================
# QDRANT_API_KEY=  # Recommended for production (generate with: openssl rand -hex 32)
# QDRANT_READ_ONLY_KEY=  # Optional: Read-only access key
# QDRANT_LOG_LEVEL=INFO
# QDRANT_ENABLE_TLS=false  # Enable for production with certificates
# QDRANT_MAX_REQUEST_SIZE=32  # Max request size in MB

# ============================================
# World Weaver Application (REQUIRED)
# ============================================
WW_SESSION_ID=default

# Neo4j Connection (must match NEO4J_* above)
WW_NEO4J_URI=bolt://localhost:7687
WW_NEO4J_USER=neo4j
WW_NEO4J_PASSWORD=  # Must match NEO4J_PASSWORD above
WW_NEO4J_DATABASE=neo4j

# Qdrant Connection
WW_QDRANT_URL=http://localhost:6333
# WW_QDRANT_API_KEY=  # Must match QDRANT_API_KEY if set

# ============================================
# Embedding Configuration (BGE-M3)
# ============================================
WW_EMBEDDING_MODEL=BAAI/bge-m3
WW_EMBEDDING_DIMENSION=1024
WW_EMBEDDING_DEVICE=cuda:0
WW_EMBEDDING_USE_FP16=true
WW_EMBEDDING_BATCH_SIZE=32
WW_EMBEDDING_MAX_LENGTH=512
WW_EMBEDDING_CACHE_DIR=./models

# ============================================
# Memory Parameters
# ============================================
WW_FSRS_DEFAULT_STABILITY=1.0
WW_FSRS_RETENTION_TARGET=0.9
WW_HEBBIAN_LEARNING_RATE=0.1
WW_HEBBIAN_INITIAL_WEIGHT=0.1

# ============================================
# Consolidation Settings
# ============================================
WW_CONSOLIDATION_MIN_SIMILARITY=0.75
WW_CONSOLIDATION_MIN_OCCURRENCES=3
WW_CONSOLIDATION_SKILL_SIMILARITY=0.85

# ============================================
# Retrieval Weights
# ============================================
WW_RETRIEVAL_SEMANTIC_WEIGHT=0.4
WW_RETRIEVAL_RECENCY_WEIGHT=0.25
WW_RETRIEVAL_OUTCOME_WEIGHT=0.2
WW_RETRIEVAL_IMPORTANCE_WEIGHT=0.15

# ============================================
# ACT-R Parameters
# ============================================
WW_ACTR_DECAY=0.5
WW_ACTR_THRESHOLD=0.0
WW_ACTR_NOISE=0.5

# ============================================
# Environment (affects security validation)
# ============================================
# WW_ENVIRONMENT=development  # or: staging, production

# ============================================
# Observability (Optional)
# ============================================
# WW_OTEL_ENABLED=false
# WW_OTEL_ENDPOINT=http://localhost:4317
# WW_OTEL_INSECURE=true  # Set false in production

# ============================================
# REST API Configuration (ww.api.server)
# ============================================
WW_API_HOST=0.0.0.0
WW_API_PORT=8765
WW_API_WORKERS=4
# WW_API_CORS_ORIGINS=*  # Restrict in production

# ============================================
# Entity Extraction (Optional)
# ============================================
WW_AUTO_EXTRACTION_ENABLED=true
WW_EXTRACTION_CONFIDENCE_THRESHOLD=0.7
WW_EXTRACTION_USE_LLM=false  # Requires OpenAI API key
# WW_EXTRACTION_LLM_MODEL=gpt-4o-mini

# ============================================
# Test Mode (for development/CI)
# ============================================
# WW_TEST_MODE=false  # Set true to bypass password validation
